<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Creates image from irregular x,y,z — as.image • fields</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Creates image from irregular x,y,z — as.image"><meta property="og:description" content="Discretizes a set of  2-d locations to a grid and produces a image object  
with the z values in the right cells. For cells with more than one Z
value the average is used."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fields</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">14.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Tps.html">Tps usage illustration</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dnychka/fieldsRPackage/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Creates image from irregular x,y,z</h1>
    
    <div class="hidden name"><code>as.image.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Discretizes a set of  2-d locations to a grid and produces a image object  
with the z values in the right cells. For cells with more than one Z
value the average is used.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">as.image</span><span class="op">(</span><span class="va">Z</span>, ind<span class="op">=</span><span class="cn">NULL</span>, grid<span class="op">=</span><span class="cn">NULL</span>, x<span class="op">=</span><span class="cn">NULL</span>,weights<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Z</span><span class="op">)</span><span class="op">)</span>,</span>
<span> na.rm<span class="op">=</span><span class="cn">FALSE</span>, nx<span class="op">=</span><span class="fl">64</span>, ny<span class="op">=</span><span class="fl">64</span>, boundary.grid<span class="op">=</span><span class="cn">FALSE</span>,  nrow<span class="op">=</span><span class="cn">NULL</span>, ncol<span class="op">=</span><span class="cn">NULL</span>,</span>
<span> FUN <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>Z</dt>
<dd><p>Values of image.</p></dd>

<dt>ind</dt>
<dd><p>A matrix giving the row and column subscripts for each image 
value in Z. (Not needed if x is specified.)</p></dd>

<dt>grid</dt>
<dd><p>A list with components x and y of equally spaced values describing the 
centers of the grid points. The default is to use nrow and ncol and the 
ranges of the data locations (x)  to construct a grid.</p></dd>

<dt>x</dt>
<dd><p>Locations of image values. Not needed if  ind  is specified.</p></dd>

<dt>nrow</dt>
<dd><p>Same as nx this is depreciated.</p></dd>

<dt>ncol</dt>
<dd><p>Same as ny this is depreciated.</p></dd>

<dt>weights</dt>
<dd><p>If two or more values fall into the same  
pixel a weighted average is used to represent the pixel value. Default is 
equal weights.</p></dd>

<dt>na.rm</dt>
<dd><p>If true NA's are removed from the Z vector.</p></dd>

<dt>nx</dt>
<dd><p>Number of grid point in X coordinate.</p></dd>

<dt>ny</dt>
<dd><p>Number of grid points in Y coordinate.</p></dd>

<dt>boundary.grid</dt>
<dd><p>If FALSE grid points are assumed to be the 
grid midpoints. If TRUE they are the grid box boundaries.</p></dd>

<dt>FUN</dt>
<dd><p>The function to apply to common values in a grid box. 
	The default is a mean (or weighted mean). If FUN is specified the 
	weights are not used.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An list in image format with a few more components. Components x and y are 
the grid values , z is a 
nrow X ncol matrix 
with the Z values. NA's are placed at cell locations where Z data has 
not been supplied.  
Component ind is a 2 column matrix with subscripts for the locations of 
the values in the image matrix.  
Component weights is an image matrix with the  sum of the
individual weights for each cell. If no weights are specified the
default for each observation is one and so the weights will be the
number of observations in each bin.</p>


    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The discretization is straightforward once the grid is determined.  
If two or more Z values have locations in the same cell the weighted 
average value is taken as the value. The weights component that is
returned can be used to account for means that have different numbers
(or precisions) of observations contributing to the grid point averages. 
The default weights are taken to be one for each observation. 
See the source code to modify this to get more 
information about coincident locations. (See the call to fast.1way)</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>image.smooth, image.plot, Krig.discretize, Krig.replicates</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># convert precip data to 50X50 image  </span></span></span>
<span class="r-in"><span><span class="va">look</span><span class="op">&lt;-</span> <span class="fu">as.image</span><span class="op">(</span> <span class="va">RMprecip</span><span class="op">$</span><span class="va">y</span>, x<span class="op">=</span> <span class="va">RMprecip</span><span class="op">$</span><span class="va">x</span>, nx<span class="op">=</span><span class="fl">50</span>, ny<span class="op">=</span><span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="image.plot.html">image.plot</a></span><span class="op">(</span> <span class="va">look</span><span class="op">)</span> </span></span>
<span class="r-plt img"><img src="as.image-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># reduced grid extent compared to the domain</span></span></span>
<span class="r-in"><span><span class="va">gridList</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">105</span>,<span class="op">-</span><span class="fl">101</span>,length.out<span class="op">=</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>  <span class="fl">38</span>, <span class="fl">42</span>,length.out<span class="op">=</span><span class="fl">10</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">look2</span><span class="op">&lt;-</span> <span class="fu">as.image</span><span class="op">(</span> <span class="va">RMprecip</span><span class="op">$</span><span class="va">y</span>, x<span class="op">=</span> <span class="va">RMprecip</span><span class="op">$</span><span class="va">x</span>,grid<span class="op">=</span><span class="va">gridList</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Some locations are outside the range of the grid</span>
<span class="r-in"><span><span class="fu"><a href="image.plot.html">image.plot</a></span><span class="op">(</span> <span class="va">look2</span><span class="op">)</span> </span></span>
<span class="r-plt img"><img src="as.image-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># number of obs in each cell -- in this case equal to the </span></span></span>
<span class="r-in"><span><span class="co"># aggregated weights because each obs had equal weight in the call</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="image.plot.html">image.plot</a></span><span class="op">(</span> <span class="va">look</span><span class="op">$</span><span class="va">x</span> ,<span class="va">look</span><span class="op">$</span><span class="va">y</span>, <span class="va">look</span><span class="op">$</span><span class="va">weights</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-plt img"><img src="as.image-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># hot spot is around Denver</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Douglas Nychka, Reinhard Furrer, John Paige, Stephan Sain, Florian Gerber, Matthew Iverson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

